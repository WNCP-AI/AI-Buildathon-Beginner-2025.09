# Step 7.5: Debugging AI-Generated Code

## What You Need
- **Time:** 30-45 minutes to read and practice
- **Skill Level:** Beginner-friendly
- **Cost:** Free
- **What You'll Learn:**
  - How AI-generated code fails differently than hand-written code
  - Systematic debugging approach for LLM applications
  - When to fix vs regenerate vs ask for help
  - Building confidence in troubleshooting

## Understanding AI Code Issues

### How LLM Code is Different
Think of AI-generated code like getting directions from someone who's never actually driven the route. They know the general path but might miss important details or make assumptions that don't work in practice.

**Key Differences:**
- **Patterns over precision:** AI follows common patterns but misses edge cases
- **Incomplete mental models:** AI doesn't "remember" the full context of your app
- **Happy path bias:** AI assumes everything goes right the first time
- **Inconsistent implementation:** Different prompts create different coding styles

### Most Common AI Code Problems

#### 1. **Styling Inconsistencies**
**What happens:** Colors, spacing, fonts look different across pages
**Why:** AI applies different design patterns in each conversation
**Example:** Homepage uses blue buttons, profile page uses green ones

#### 2. **Missing Error Handling**
**What happens:** App works perfectly until something goes wrong
**Why:** AI focuses on the happy path, forgets error cases
**Example:** Form works when internet is good, crashes when connection is slow

#### 3. **Incomplete Features**
**What happens:** Feature looks done but doesn't actually work
**Why:** AI implements the UI but forgets the logic
**Example:** "Save" button appears but doesn't save data

#### 4. **State Management Problems**
**What happens:** Data disappears when you navigate between pages
**Why:** AI doesn't properly connect components to shared data
**Example:** User profile shows on one page, blank on another

#### 5. **Mobile Responsiveness**
**What happens:** Looks great on computer, broken on phone
**Why:** AI develops for desktop first, mobile second
**Example:** Text too small to read, buttons too small to tap

## The AI Debugging Process

### Step 1: Document What's Actually Happening

Before asking for help, write down exactly what you see:

**Good Problem Description:**
- "When I click the 'Book Service' button, nothing happens"
- "The drone operator cards show up fine on desktop but are squished together on my phone"
- "I can log in as a customer, but when I switch to operator mode, my profile picture disappears"

**Bad Problem Description:**
- "It's broken"
- "Nothing works"
- "There's a bug"

### Step 2: Ask Yourself These Questions

Use this checklist to understand your issue better:

✅ **Consistency Check**
- Does this problem happen every time, or only sometimes?
- Does it happen on different devices (phone, computer, tablet)?
- Does it happen for different user types (customer vs operator)?

✅ **Timing Check**
- Did this work before and suddenly stop?
- Did the problem start after adding a new feature?
- Does it happen immediately or after using the app for a while?

✅ **Environment Check**
- Are you testing in preview mode or published app?
- Are you logged in or logged out?
- Is your internet connection stable?

### Step 3: Use Diagnostic Prompts

Copy these prompts to help AI understand your issue:

#### For Feature Not Working
```
I'm having trouble with [specific feature name]. Here's what's happening:

- What I expect: [describe what should happen]
- What actually happens: [describe what you see instead]
- Steps to reproduce: [list exact steps to cause the problem]
- When it started: [when you first noticed it]

Can you help me figure out what might be causing this and how to fix it?
```

#### For Design/Layout Issues
```
I'm seeing a layout problem with [specific page/component].

- Problem: [describe visual issue]
- Device: [phone/tablet/desktop]
- Browser: [Chrome/Safari/etc]
- Screenshot: [describe what you see or share image]

The issue seems to be [be specific about which elements look wrong]. Can you help me fix the responsive design?
```

#### For Data Not Saving
```
Data isn't persisting properly in my app. Here's the details:

- What data: [user profile, booking info, etc]
- Where it should save: [which form/page]
- What happens: [data disappears, doesn't submit, etc]
- Error messages: [any error text you see]

Can you check the database connection and data handling for this feature?
```

## Systematic Debugging Approach

### Level 1: Quick Fixes (Try These First)

#### Refresh and Retry
1. **Refresh the preview** - Click the refresh button in Lovable
2. **Clear browser cache** - Hard refresh (Ctrl+Shift+R or Cmd+Shift+R)
3. **Try different browser** - Test in Chrome, Safari, or Edge
4. **Wait and try again** - Sometimes Lovable needs a moment to process

#### Check the Obvious
1. **Verify you're logged in** to the right account type
2. **Check internet connection** is stable
3. **Make sure you're in the right app** (not an old version)
4. **Try on different device** (phone vs computer)

### Level 2: AI-Assisted Diagnosis

#### Describe and Ask
Use this prompt template:

```
I need help debugging an issue. Here's a complete description:

**Feature affected:** [specific feature name]
**Expected behavior:** [what should happen]
**Actual behavior:** [what happens instead]
**Steps to reproduce:**
1. [first step]
2. [second step]
3. [when problem occurs]

**Environment details:**
- Device: [phone/computer]
- Browser: [Chrome/Safari/etc]
- User type: [customer/operator/admin]
- Happens: [always/sometimes/first time]

**Recent changes:** [anything added recently]

Can you help me identify what might be causing this and suggest a fix?
```

#### Request Explanation
```
Before we fix this, can you explain what this code is supposed to do and why it might not be working?

[paste any error messages or describe the broken feature]

I want to understand the logic so I can spot similar issues in the future.
```

### Level 3: Strategic Fixes

#### When to Fix vs Regenerate

**Fix the existing code when:**
- Problem is small and isolated
- Most of the feature works correctly
- You understand what needs to change
- Fix won't break other parts

**Regenerate completely when:**
- Multiple things are broken
- The approach seems fundamentally wrong
- You've tried several fixes that didn't work
- Feature never worked properly from the start

#### Regeneration Prompt
```
The [feature name] isn't working properly and needs to be rebuilt. Here are the requirements:

**Core functionality needed:**
- [requirement 1]
- [requirement 2]
- [requirement 3]

**Integration points:**
- Must work with: [other features it connects to]
- Data it needs: [what information it uses]
- User flow: [how users interact with it]

**What was wrong with the previous version:**
- [specific issues you encountered]

Please rebuild this feature from scratch with proper error handling and mobile responsiveness.
```

## Common Issue Categories & Solutions

### Database & Data Issues

#### Problem: Data Not Saving
**Symptoms:** Forms submit but information doesn't persist
**Common Causes:** Missing database connections, incorrect field mapping
**Fix Prompt:**
```
My form data isn't saving to the database. The form submits successfully but when I refresh or navigate away, the data is gone. Please check the database integration and ensure all form fields are properly connected to the database schema.
```

#### Problem: Data Loading Slowly
**Symptoms:** Blank screens, loading spinners that never finish
**Common Causes:** Inefficient database queries, missing loading states
**Fix Prompt:**
```
My app shows loading spinners but data never appears. Please optimize the database queries and add proper loading states with fallbacks for when data takes longer to load.
```

### UI/UX Issues

#### Problem: Mobile Layout Broken
**Symptoms:** Text too small, buttons overlapping, horizontal scrolling
**Common Causes:** Fixed widths, missing responsive breakpoints
**Fix Prompt:**
```
The app looks good on desktop but is broken on mobile devices. Text is too small to read and buttons are hard to tap. Please make all components fully responsive and mobile-friendly.
```

#### Problem: Inconsistent Styling
**Symptoms:** Different colors, fonts, spacing across pages
**Common Causes:** CSS conflicts, missing design system
**Fix Prompt:**
```
The styling isn't consistent across different pages. Some buttons are blue, others are green. Some text is large, some is small. Please standardize the design system and apply consistent styling throughout the app.
```

### Authentication & User Management

#### Problem: Login Issues
**Symptoms:** Can't log in, or login doesn't persist
**Common Causes:** Session management problems, authentication config
**Fix Prompt:**
```
Users are having trouble logging in or staying logged in. Please review the authentication flow and ensure sessions persist properly across page navigations and browser refreshes.
```

#### Problem: Role Switching Not Working
**Symptoms:** User can't switch between customer and operator modes
**Common Causes:** User role logic incomplete
**Fix Prompt:**
```
The role switching functionality isn't working. Users should be able to toggle between customer and operator modes, but the toggle doesn't change their permissions or available features. Please implement proper role switching with all necessary UI updates.
```

### Performance Issues

#### Problem: App Loads Slowly
**Symptoms:** Long loading times, blank screens
**Common Causes:** Large images, inefficient code, missing optimization
**Fix Prompt:**
```
The app is loading very slowly. Please optimize loading performance by compressing images, implementing lazy loading, and improving code efficiency.
```

## Emergency Recovery Procedures

### When Everything Breaks

#### Step 1: Don't Panic
- Save any work you haven't submitted
- Take a screenshot of the error for reference
- Note exactly what you were doing when it broke

#### Step 2: Try Basic Recovery
```
My SkyMarket app seems to have broken completely. Here's what happened:

**Last thing I was doing:** [specific action]
**What I see now:** [error message or broken state]
**What should be working:** [expected functionality]

Please help me get back to a working state. If needed, I'm okay with reverting recent changes to get the core functionality working again.
```

#### Step 3: Request Rollback
```
I need to rollback to the last working version of my app. The current state has too many issues to fix individually. Please restore the app to working condition with these core features:

- [essential feature 1]
- [essential feature 2]
- [essential feature 3]

We can add back the recent features one at a time after the foundation is stable.
```

## Prevention Strategies

### Test Early and Often

**After Each Major Feature:**
1. **Test the happy path** - does the main use case work?
2. **Test edge cases** - what happens when things go wrong?
3. **Test different devices** - phone, tablet, desktop
4. **Test different user types** - customer, operator, admin

### Communicate Clearly with AI

**Good Prompts Include:**
- Specific feature names
- Expected vs actual behavior
- Step-by-step reproduction
- Device and browser info
- Recent changes made

**Bad Prompts:**
- "Fix this"
- "It doesn't work"
- "Make it better"
- Vague descriptions

### Build Incrementally

**Best Practice:**
1. **Add one feature at a time**
2. **Test thoroughly before adding next feature**
3. **Keep backup versions** of working states
4. **Document what works** so you can explain it to AI

## Building Your Debugging Confidence

### Start Small
Begin by debugging minor issues like:
- Text that's the wrong color
- Buttons that are too small
- Images that don't load

### Practice the Process
1. **Describe the problem clearly**
2. **Ask AI for explanation**
3. **Try the suggested fix**
4. **Verify it works**
5. **Document what you learned**

### Learn the Patterns
After fixing several issues, you'll notice:
- Common types of problems
- Effective ways to describe issues
- Which prompts work best
- When to fix vs regenerate

### Remember: You're the Expert on Your App
- You know how it should work
- You understand your users' needs
- You can spot when something feels wrong
- AI needs your guidance to fix it properly

## When to Ask for Help

### Ask Instructor/Mentor When:
- You've tried multiple AI suggestions and nothing works
- The problem affects core functionality and you need the app working quickly
- You're not sure if the issue is with your app or Lovable itself
- You want to understand the underlying technical concepts better

### Ask Fellow Participants When:
- You want to see if others have experienced similar issues
- You need someone to test your app on different devices
- You want a second opinion on whether something is actually broken
- You're looking for creative workarounds

### Keep Working When:
- The issue is cosmetic and doesn't break functionality
- You have a clear path forward with AI assistance
- You're learning valuable troubleshooting skills
- The app still meets your minimum requirements

## ✅ Debugging Skills Checklist

Before moving to the next step, verify you can:

**Basic Troubleshooting:**
- [ ] Describe problems clearly and specifically
- [ ] Test issues across different devices and browsers
- [ ] Identify whether problems are consistent or intermittent
- [ ] Use diagnostic prompts effectively

**AI Communication:**
- [ ] Ask AI to explain what code is supposed to do
- [ ] Request step-by-step debugging assistance
- [ ] Decide when to fix vs regenerate features
- [ ] Document solutions for future reference

**Problem Categories:**
- [ ] Recognize common data/database issues
- [ ] Identify UI/UX and responsive design problems
- [ ] Troubleshoot authentication and user management
- [ ] Address basic performance issues

**Confidence Building:**
- [ ] Feel comfortable experimenting with fixes
- [ ] Know when to ask for human help
- [ ] Can recover from major app breakdowns
- [ ] Building systematic debugging habits

Remember: Every developer spends significant time debugging. The key is developing systematic approaches and clear communication skills - especially important when working with AI assistants!